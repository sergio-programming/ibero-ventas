<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<title>API Cliente Ibero Ventas</title>
		<link rel="stylesheet" href="app.css" />
	</head>

	<body>
		<script type="text/template" id="tmp_login">
			<h1>LOGIN</h1>
			<form>
				<div class="text writing">
				<input type="text" id="cedula" name="cedula" required>
				<label for="cedula">Número de cedula</label>
				<span></span>
				<p class='help-error' data-alert='cedula'></p>
				</div>

				<div class="password writing">
				<input type="password" id="clave" name="clave">
				<label for="clave">Contraseña</label>
				<span></span>
				<p class='help-error' data-alert='clave'></p>
				</div>

				<div class="submit">
				<br/>
				<button type="button" name='btnEnviar' id='btnEnviar'>Enviar</button>
				<br/> <br/>
				<div class='list-group'><a href='#' class='link' type="button" name='btnRegistrar' id='btnRegistrar'>Registrar usuario</a></div>
				<div class='list-group'><a href='#' class='link' type="button" name='btnRecuperar' id='btnRecuperar'>Olvido la clave, la puedes recuperar aquí</a></div>
				<div class='list-group'><a href='#' class='link' type="button" name='btnCambioClave' id='btnCambioClave'>Cambiar su clave aquí</a></div>
				</div>
			</form>
		</script>

		<script type="text/template" id="tmp_signup">
			<h1>REGISTRAR</h1>
			<form>

				<div class="text writing">
				<input type="text" id="cedula" name="cedula" required>
				<label for="nombre">Cedula*</label>
				<span></span>
				<p class='help-error' data-alert='cedula'></p>
				</div>

				<div class="text writing">
				<input type="text" id="nombres" name="nombres" required>
				<label for="nombre">Nombres*</label>
				<span></span>
				<p class='help-error' data-alert='nombres'></p>
				</div>

				<div class="text writing">
				<input type="text" id="apellidos" name="apellidos" required>
				<label for="nombre">Apellidos*</label>
				<span></span>
				<p class='help-error' data-alert='apellidos'></p>
				</div>

				<div class="text writing">
				<input type="text" id="email" name="email" required>
				<label for="nombre">Email*</label>
				<span></span>
				<p class='help-error' data-alert='email'></p>
				</div>

				<div class="password writing">
					<input type="number" id="celular" name="celular">
					<label for="contrasena">Celular</label>
					<span></span>
					<p class='help-error' data-alert='celular'></p>
				</div>

				<div class="password writing">
				<input type="password" id="clave" name="clave">
				<label for="contrasena">Contraseña*</label>
				<span></span>
				<p class='help-error' data-alert='clave'></p>
				</div>

				<div class="submit">
				<br/>
				<button type="button" class='active' name='btnEnviar' id='btnEnviar'>Enviar</button>
				<br/> <br/>
				<div class='list-group'><a class='link' href='#' type="button" name='btnLogin' id='btnLogin'>Login de usuario</a></div>
				<div class='list-group'><a class='link' href='#' type="button" name='btnRecuperar' id='btnRecuperar'>Olvido la clave, la puedes recuperar aquí</a></div>
				<div class='list-group'><a class='link' href='#' type="button" name='btnCambioClave' id='btnCambioClave'>Cambiar su clave aquí</a></div>
				</div>
			</form>
		</script>

		<script type="text/template" id="tmp_change_pass">
			<h1>CAMBIAR DE CLAVE</h1>
			<form>
				<div class="text writing">
				<input type="text" id="cedula" name="cedula" required>
				<label for="cedula">Cedula</label>
				<span></span>
				<p class='help-error' data-alert='cedula'></p>
				</div>

				<div class="password writing">
				<input type="password" id="clave_old" name="clave_old">
				<label for="contrasena">Contraseña actual</label>
				<span></span>
				<p class='help-error' data-alert='clave_old'></p>
				</div>

				<div class="password writing">
				<input type="password" id="clave_new" name="clave_new">
				<label for="contrasena">Contraseña nueva</label>
				<span></span>
				<p class='help-error' data-alert='clave_new'></p>
				</div>

				<div class="submit">
				<br/>
				<button type="button" name='btnEnviar' id='btnEnviar'>Enviar</button>
				<br/> <br/>
				<div class='list-group'><a href='#' class='link' type="button" name='btnLogin' id='btnLogin'>Login de usuario</a></div>
				<div class='list-group'><a href='#' class='link' type="button" name='btnRegistrar' id='btnRegistrar'>Registrar usuario</a></div>
				<div class='list-group'><a href='#' class='link' type="button" name='btnRecuperar' id='btnRecuperar'>Olvido la clave, la puedes recuperar aquí</a></div>
				</div>
			</form>
		</script>

		<script type="text/template" id="tmp_recovery_user">
			<h1>OLVIDO LA CLAVE</h1>
			<form>
				<div class="text writing">
				<input type="text" id="cedula" name="cedula" required>
				<label for="nombre">Cedula</label>
				<span></span>
				<p class='help-error' data-alert='cedula'></p>
				</div>

				<div class="text writing">
				<input type="text" id="email" name="email" required>
				<label for="nombre">Email</label>
				<span></span>
				<p class='help-error' data-alert='email'></p>
				</div>

				<div class="submit">
				<br/>
				<button type="button" name='btnEnviar' id='btnEnviar'>Enviar</button>
				<br/> <br/>
				<div class='list-group'><a class='link' href='#' type="button" name='btnLogin' id='btnLogin'>Login de usuario</a></div>
				<div class='list-group'><a class='link' href='#' type="button" name='btnRegistrar' id='btnRegistrar'>Registrar usuario</a></div>
				<div class='list-group'><a class='link' href='#' type="button" name='btnCambioClave' id='btnCambioClave'>Cambiar su clave aquí</a></div>
				</div>
			</form>
		</script>

		<script type="text/template" id="tmp_perfil">
			<div class='card'>
				<div class='card-header'>
					<div class='list-group'><a href='#' class='close' type='button' id='btnClose'>X</a></div>
					<br/>
					<h2>Bienvenido <br/><small><%=username%></small></h2>
					<br/>
					<div class="card-img">
						<img src="img/<%=avatar%>" width='100px' alt="avatar">
					</div>
				</div>
				<div class='card-body'>
					<div class='form-group'>
						<label>Email: <%=email%></label>
					</div>
					<div class='form-group'>
						<label>Identificación: <%=cedula%></label>
					</div>
					<a href='#' class='link' type='button' id='btnWorker'>Vamos a trabajar<br/><br/>
						<img src="img/coffe.png" alt="coffee" width="100px" style='border-radius:10%'>
					</a>

				</div>
			</div>
		</script>

		<script type="text/template" id="tmp_venta_table">
			<div class='card'>
				<div class='list-group'><a href='#' class='close' type='button' id='btnClose'><span>X</span></a><div>
				<div class='card-header'>
					<h2>Ultimas Ventas Del Día</h2>
					<p><%=username%></p><br>
					<div class="card-img">
						<img src="img/<%=avatar%>" width='120px' alt="avatar">
					</div>
					<br/>
				</div>
				<div class='card-body'>
					<table class='table' cellspacing='0' cellpadding='0'>
						<thead>
							<tr>
								<td>Fecha</td>
								<td>Productos</td>
								<td>Cliente</td>
								<td>Total pago</td>
								<td>Cantidad</td>
								<td>Usuario</td>
								<td colspan='3'>Opciones</td>
							</tr>
						</thead>
						<tbody id='showRowsTable'></tbody>
					</table>
					<br/>
					<a class='link' href='#' type='button' id='btnPerfil'><span>Ver perfil</span></a>
					<button type='button' id='btnPlus' class='btn-md green'>Crear ventas +</button>
					<br/>
				</div>
			</div>
		</script>

		<script type="text/template" id="tmp_rows_venta_firmeza">
			<td><%= fecha %></td>
			<td><%= _.size(detalles) %></td>
			<td><%= cliente.nombres + ' ' + cliente.apellidos %></td>
			<td><%= valor%></td>
			<td><%= _.size(detalles) %></td>
			<td><%= user.nombres + ' ' + user.apellidos %></td>
			<td><button type='button' data-toggle='showDetalle' data-id='<%=_id%>' class='btn-sm blue'>Detalles</button></td>
			<td><button type='button' data-toggle='editDetalle' data-id='<%=_id%>' class='btn-sm orange'>Editar</button></td>
			<td><button type='button' data-toggle='trashDetalle' data-id='<%=_id%>' class='btn-sm red'>Borrar</button></td>
		</script>

		<script type="text/template" id="tmp_venta_create">
			<div class='card' style="width:400px">
				<div class='card-body'>
					<form method='POST' action='#' id='ventaForm'>
						<input type='text' style='display:none' id="user" name="user" value='<%=cedula%>'/>

						<div class="text date">
							<input type="date" id="fecha" name="fecha" required value='<%= venta.fecha%>' class='has-text'/>
							<label for="fecha">Fecha*</label>
							<span></span>
							<p class='help-error' data-alert='fecha'></p>
						</div>

						<div class="text writing">
							<input type="text" id="cliente_cedula" name="cliente_cedula" required/>
							<label for="nombre">Cedula cliente</label>
							<span></span>
							<p class='help-error' data-alert='cliente_cedula'></p>
						</div>

						<div class="text writing">
							<input type="text" id="cliente_nombre" name="cliente_nombre" required/>
							<label for="nombre">Nombres cliente</label>
							<span></span>
							<p class='help-error' data-alert='cliente_nombre'></p>
						</div>

						<div class="text writing">
							<input type="text" id="cliente_apellido" name="cliente_apellido" required/>
							<label for="nombre">Apellidos cliente</label>
							<span></span>
							<p class='help-error' data-alert='cliente_apellido'></p>
						</div>
						<%
						total = 0
						_.each(detalles, function(row, ai){
							total+= parseInt(row.valor) * parseInt(row.cantidad)
						}) %>
						<div class="text writing">
							<input type="number" id="valor" name="valor" required value='<%= total%>' class='has-text'>
							<label for="nombre">Valor*</label>
							<span></span>
							<p class='help-error' data-alert='valor'></p>
						</div>

						<div class="select">
							<label class="titulo">Detalles</label>
							<div class="view">
								<ul class='list-group'>
									<% _.each(detalles, function(row, ai){ %>
										<li class='list-item'>
											<img src='img/<%= row.photo%>' />
											<label><%= row.nombre%></label>
											<br/>
											<div class='p-2'>
												<label>Valor unidad: $ <span><%= row.valor%></span></label>
												<label>Unidades</label>
												<input type="number" toggle-detalles='productos' id='<%= row.producto%>' name="detalles[]" min="1" max="9999999" value='1'/>
											</div>
										</li>
									<% }) %>
								</ul>
							</div>
						</div>
						<div class="radio">
							<label data-toggle='toggle_seleccion1'" for="opcion1">
								<input type="radio" name="opcion" value="C" id="opcio1">
								<div class="view"></div> Cancelado
							</label>
							<label data-toggle='toggle_seleccion2'">
								<input type="radio" name="opcion" value="P">
								<div class="view"></div> Pendiente
							</label>
						</div>

						<div class="submit">
							<br/>
							<button type="button" class='active' name='btnEnviar' id='btnEnviar'>Enviar</button>
							<br/>
						</div>
					</form>
				</div>
			</div>
		</script>

		<script type="text/template" id="tmp_venta_edita">
			<div class='card-header'>
				<h3>EDITA LA VENTA</h3><br/>
				<div class='list-group'><a href='#' class='close' type='button' name='btnRegresar' id='btnRegresar'>X</a></div>
			</div>
			<div class='card-body'>
				<form>
					<input type='text' style='display:none' id="user_id" name="user_id" value='<%=cedula%>'/>
					<div class="text writing">
						<input type="text" id="cliente_cedula" name="cliente_cedula" value='<%=cliente.cedula%>' required class='has-text'/>
						<label for="nombre">Cedula cliente</label>
						<span></span>
						<p class='help-error' data-alert='cliente_cedula'></p>
					</div>
					<div class="text writing">
						<input type="text" id="cliente_nombre" name="cliente_nombre" value='<%=cliente.nombres%>' required class='has-text'/>
						<label for="nombre">Cliente nombres</label>
						<span></span>
						<p class='help-error' data-alert='cliente_nombre'></p>
					</div>

					<div class="text writing">
						<input type="text" id="cliente_apellidos" name="cliente_apellidos" value='<%=cliente.apellidos%>' required class='has-text'/>
						<label for="nombre">Cliente apellidos</label>
						<span></span>
						<p class='help-error' data-alert='cliente_apellidos'></p>
					</div>

					<div class="text date">
						<input type="date" id="fecha" name="fecha" required value='<%=fecha%>' class='has-text'>
						<label for="fecha">Fecha*</label>
						<span></span>
						<p class='help-error' data-alert='fecha'></p>
					</div>

					<div class="text writing">
						<input type="text" id="valor" name="valor" required value='<%= valor%>' class='has-text'>
						<label for="nombre">Valor*</label>
						<span></span>
						<p class='help-error' data-alert='valor'></p>
					</div>

					<div class="select">
						<label class="titulo">Detalles</label>
						<div class="view">
							<ul class='list-group'>
								<% _.each(detalles, function(row, ai){ %>
									<li class='list-item'>
										<img src='img/<%= row.producto.photo %>' />
										<label><%= row.producto.detalle %></label>
										<br/>
										<div class='p-2'>
											<label>Valor unidad: $ <span><%= row.valor%></span></label>
											<label>Unidades <%=row.cantidad %></label>
											<label>Subtotal <%=row.subtotal %></label>
										</div>
									</li>
								<% }) %>
							</ul>
						</div>
					</div>

					<div class="radio">
						<label data-toggle='toggle_seleccion1'" for="opcion1">
							<input type="radio" name="opcion" value="C" id="opcio1">
							<div class="view"></div> Cancelado
						</label>
						<label data-toggle='toggle_seleccion2'">
							<input type="radio" name="opcion" value="P">
							<div class="view"></div> Pendiente
						</label>
					</div>

					<div class="submit">
						<br/>
						<button type="button" class='active' name='btnEnviar' id='btnEnviar'>Enviar</button>

					</div>
				</form>
			</div>
		</script>

		<script type="text/template" id="tmp_venta_show">
			<div class='card'>
				<div class='card-header'>
					<h3>DETALLE VENTA</h3>
					<div class='list-group'><a href='#' class='close' type='button' name='btnRegresar' id='btnRegresar'>X</a></div>
					<div class="card-img p-2">
						<img src="img/<%=avatar%>" width='80px' alt="avatar" />
					</div>
				</div>
				<div class='card-body'>
					<div class="text writing">

						<ul class='list-group'>
							<li class='list-item'>
								<label for="nombre">FECHA: <%= fecha%></label>
							</li>
							<li class='list-item'>
								<label for="nombre">USUARIO: <%= cedula%></label>
							</li>
							<li class='list-item'>
								<label for="nombre">VALOR: <%= valor%></label>
							</li>
							<li class='list-item'>
								<label for="titulo">Detalles</label>
							</li>

							<% _.each(detalles, function(row, ai){ %>

								<li class='list-item'>
									<img src='img/<%= row.producto.photo %>' />
									<label><%= row.producto.detalle %></label>
									<br/>
									<div class='p-2'>
										<label>Valor unidad: $ <span><%= row.valor%></span></label><br/>
										<label>Unidades <%=row.cantidad %></label><br/>
										<label>Subtotal <%=row.subtotal %></label><br/>
									</div>
								</li>
							<% }) %>
							<li class='list-item'>
								<label for="nombre">CLIENTE <%= cliente.nombres + ' '+ cliente.apellidos %></label>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</script>

		<script type="text/template" id="tmp_tabs_content">
			<div class="page-content">
				<% if(_.isNull(title) === false){ %>
					<h3><%=title%></h3><br/>
					<div class='list-group'><a href='#' class='close' type='button' name='btnRegresar' id='btnRegresar'>X</a></div>
				<% } %>
				<nav>
					<ul class="tabs">
						<% _.each(tabs, function(tab, ai) {%>
							<li class="tab-li">
								<a type='button' data-href="#<%= tab.current%>" data-name="<%= tab.name%>" toggle-event='tab' class="tab-li__link <%= (tab.disabled)? 'disabled':'' %>"><%= tab.label%></a>
							</li>
						<% }) %>
					</ul>
				</nav>
				<% _.each(tabs, function(tab, ai) {%>
				<section id="<%= tab.current%>" data-tab-content>
					<div class="tab__content" id="tab__<%= tab.name%>">Procesando render view...</div>
				</section>
				<% }) %>
			</div>
		</script>

		<script type="text/template" id="tmp_lista_productos">
			<div>
				<ul class='list-group'>
					<% if(categoria._id != void 0){%>
					<li class='list-item'>
						<div class='card'>
							<div class='card-body' id='show_categoria'>
								<label class='p-2'><%= categoria.detalle%></label><br/>
								<img class='p-2' src='img/<%= categoria.photo%>' />
							</div>
							<div class='card-header'>
								<a class='link' type='button' toggle-event='clean'>Limpiar</a>
							</div>
						</div>
					</li>
					<% }
					_.each(productos, function(row, ai){ %>
						<li class='list-item'>
							<a type='button' data-id='<%= row._id%>' toggle-event='producto'>
								<img src='img/<%= row.photo%>' />
								<label><%= row.detalle%></label><br/>
								<p class='p-2'><span>Precio: $ <%= row.precio%></span>
								<span>Disponibles: <%= row.stock%></span></p>
							</a>
						</li>
					<% }) %>
				</ul>
			</div>
		</script>

		<script type="text/template" id="tmp_lista_categorias">
			<div class='col-3'>
				<a type='button' data-id='<%= _id%>' toggle-event='selected'>
					<div class='p-2'><%= detalle%></div>
					<img src='img/<%= photo%>' /><br/>
					<%= (estado=='A')? 'Disponible':'Agotado' %>
				</a>
			</div>
		</script>

		<script type="text/template" id="tmp_cliente_table">
			<div class='card'>
				<div class='list-group'><a href='#' class='close' type='button' id='btnRegresar'><span>X</span></a><div>
				<div class='card-header'>
					<h2>Clientes</h2>
				</div>
				<div class='card-body'>
					<table class='table' cellspacing='0' cellpadding='0'>
						<thead>
							<tr>
								<td>Cedula</td>
								<td>Nombres</td>
								<td>Apellidos</td>
							</tr>
						</thead>
						<tbody>
							<% _.each(clientes, function(cliente, ai){ %>
								<tr>
									<td><%= cliente.cedula%></td>
									<td><%= cliente.nombres%></td>
									<td><%= cliente.apellidos%></td>
								</tr>
							<% }) %>
						</tbody>
					</table>

				</div>
			</div>
		</script>

		<script type="text/template" id="tmp_producto_table">
			<div class='card'>
				<div class='list-group'><a href='#' class='close' type='button' id='btnRegresar'><span>X</span></a><div>
				<div class='card-header'>
					<h2>Productos</h2>
				</div>
				<div class='card-body'>
					<table class='table' cellspacing='0' cellpadding='0'>
						<thead>
							<tr>
								<td>Serial</td>
								<td>Nombre</td>
								<td>Disponibles</td>
								<td>Foto</td>
							</tr>
						</thead>
						<tbody>
							<% _.each(productos, function(producto, ai){ %>
								<tr>
									<td><%= producto.serial%></td>
									<td><%= producto.detalle%></td>
									<td><%= producto.stock%></td>
									<td><%= producto.photo%></td>
								</tr>
							<% }) %>
						</tbody>
					</table>

				</div>
			</div>
		</script>

		<script type="text/template" id="tmp_categoria_table">
			<div class='card'>
				<div class='list-group'><a href='#' class='close' type='button' id='btnRegresar'><span>X</span></a><div>
				<div class='card-header'>
					<h2>Categorias</h2>
				</div>
				<div class='card-body'>
					<table class='table' cellspacing='0' cellpadding='0'>
						<thead>
							<tr>
								<td>Serial</td>
								<td>Nombre</td>
								<td>Foto</td>
							</tr>
						</thead>
						<tbody>
							<% _.each(categorias, function(categoria, ai){ %>
								<tr>
									<td><%= categoria.serial%></td>
									<td><%= categoria.detalle%></td>
									<td><%= categoria.photo%></td>
								</tr>
							<% }) %>
						</tbody>
					</table>

				</div>
			</div>
		</script>

		<div id="app"></div>
	</body>
</html>
